{"version":3,"sources":["utils/browser.js","utils/easing.js","utils/random.js","utils/color.js","utils/math.js","logic/galaxy.js","components/Canvas.js","utils/misc.js","presets.js","components/Inputs.js","utils/sharing.js","utils/analytics.js","components/App.js","index.js"],"names":["isiOS","test","navigator","userAgent","window","MSStream","supportsEffects","match","Easing","linear","t","inQuad","Math","pow","outQuad","inOutQuad","inCubic","outCubic","inOutCubic","inQuart","outQuart","inOutQuart","inQuint","outQuint","inOutQuint","inSine","cos","PI","outSine","sin","inOutSine","inExpo","outExpo","inOutExpo","inCirc","sqrt","outCirc","inOutCirc","outBounce","inBack","s","outBack","inOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","RNG","seed","Object","classCallCheck","this","original","_random","random","bind","orignal","x","floor","seededRandom","hexToRGB","hex","result","exec","r","parseInt","g","b","lerp","min","max","polarToCart","theta","y","polarToCart3d","theta1","theta2","z","rotationMatrix","roll","yaw","pitch","cosa","sina","cosb","sinb","cosc","sinc","Axx","Axy","Axz","Ayx","Ayy","Ayz","Azx","Azy","Azz","rotate","_ref","_ref2","px","py","pz","STATIC_ARM_CURVE","STATIC_ARM_SCALE_RATIO","getGalaxyStars","preset","radius","time","getRandomPosition","type","positionsRNG","ease","density","a","spiralCart","armsCurve","exp","spiralPolar","atan2","arm","arms","armAngleTransform","spiralCoords","spreadR","spread","spreadShape","spreadT1","spreadT2","spreadCoords","getZPosition","heightSpread","getSpiralPositionRandomizer","globularCoords","getGloburalPositionRandomizer","getRandomStyle","styleRNG","colors","starColor","map","size","color","length","getStyleRandomizer","animationMatrix","cameraMtrix","cameraX","cameraZ","cameraY","stars","i","_getRandomPosition","animationRotatedVector","cameraRotatedVector","_getRandomStyle","push","position","rng","starR","sideShape","height","GLOBULAR_PADDING","ANIMATION_SPEED_MULTIPLIER","AVAILABLE_BLEND_MODES","Canvas","canvasRef","offscreenCanvasRef","React","useRef","texturesCanvasRef","useLayoutEffect","ctx","current","getContext","offscreenCanvas","raf","onFrame","animated","animSpeed","draw","loopRaf","requestAnimationFrame","cancelAnimationFrame","react_default","createElement","Fragment","className","ref","width","presentedCtx","arguments","undefined","offscreenCanvasCtx","canvasSize","canvas","transformedRadius","clearRect","imgData","getImageData","forEach","star","sizeMultiplier","alpha","drawPixel","data","drawStar","luminance","putImageData","globalCompositeOperation","filter","fillStyle","spaceColor","fillRect","layers","layer","blend","blur","concat","drawImage","gradient","createRadialGradient","addColorStop","finalizeWithEffects","watermark","font","fillText","addWatermark","pixels","_ref3","index","isNotUndefined","val","immutableIndexUpdate","array","newValue","assign","defineProperty","immutableIndexSwitch","withIndex","_Object$assign2","PRESET_VERSION","DEFAULT_PRESET","name","version","CAMERA_PRESETS","topDown","sideways","tilted","semiSideways","nice","EFFECT_PRESETS","angelic","milky","sauron","BLEND_MODES_TO_TEXT","source-over","soft-light","hard-light","color-dodge","color-burn","Inputs","presets","advanced","onChange","onChangePreset","onUndoChanges","onSave","onSavePreset","onShare","onChangeAdvanced","createRef","useEffect","scrollTop","scrollHeight","href","target","rel","onClick","role","aria-label","separator","select","buttonIcon","buttonAction","input","step","title","keys","defaultValue","e","value","disabled","option","key","_","addToArray","keyId","objectSpread","htmlFor","autoComplete","id","onKeyUp","fixAndroidKeyboardDismiss","checked","keyCode","preventDefault","text","options","rest","objectWithoutProperties","hasIndex","parseFloat","readOnly","extraOptions","urlToPreset","hash","location","split","JSON","parse","atob","hashToPreset","_unused","presetToHash","btoa","stringify","track","eventAction","ga","eventLabel","CANVAS_SIZE","localStorage","getItem","clear","setItem","ReactDOM","render","_React$useState","useState","default","_React$useState2","slicedToArray","setPresets","_React$useState3","_React$useState4","setAdvanced","initialPreset","_React$useState5","_React$useState6","setPresetValue","toBlob","blob","saveAs","newPresets","document","newPreset","presetName","url","hashtags","shareURL","params","join","prop","encodeURIComponent","open","shareOnTwitter","presetToUrl","getElementById"],"mappings":"0NAIO,SAASA,IACd,MAAO,mBAAmBC,KAAKC,UAAUC,aAAeC,OAAOC,SAW1D,SAASC,IACd,OAhBSJ,UAAUC,UAAUI,MAAM,6BAgBZP,ICjBlB,IAAMQ,EAAS,CACpBC,OAAQ,SAASC,GACf,OAAOA,GAETC,OAAQ,SAASD,GACf,OAAOE,KAAKC,IAAIH,EAAG,IAErBI,QAAS,SAASJ,GAChB,QAASE,KAAKC,IAAIH,EAAI,EAAG,GAAK,IAGhCK,UAAW,SAASL,GAClB,OAAKA,GAAK,IAAO,EAAU,GAAME,KAAKC,IAAIH,EAAG,IACrC,KAAQA,GAAK,GAAKA,EAAI,IAGhCM,QAAS,SAASN,GAChB,OAAOE,KAAKC,IAAIH,EAAG,IAGrBO,SAAU,SAASP,GACjB,OAAOE,KAAKC,IAAIH,EAAI,EAAG,GAAK,GAG9BQ,WAAY,SAASR,GACnB,OAAKA,GAAK,IAAO,EAAU,GAAME,KAAKC,IAAIH,EAAG,GACtC,IAAOE,KAAKC,IAAIH,EAAI,EAAG,GAAK,IAGrCS,QAAS,SAAST,GAChB,OAAOE,KAAKC,IAAIH,EAAG,IAGrBU,SAAU,SAASV,GACjB,QAASE,KAAKC,IAAIH,EAAI,EAAG,GAAK,IAGhCW,WAAY,SAASX,GACnB,OAAKA,GAAK,IAAO,EAAU,GAAME,KAAKC,IAAIH,EAAG,IACrC,KAAQA,GAAK,GAAKE,KAAKC,IAAIH,EAAG,GAAK,IAG7CY,QAAS,SAASZ,GAChB,OAAOE,KAAKC,IAAIH,EAAG,IAGrBa,SAAU,SAASb,GACjB,OAAOE,KAAKC,IAAIH,EAAI,EAAG,GAAK,GAG9Bc,WAAY,SAASd,GACnB,OAAKA,GAAK,IAAO,EAAU,GAAME,KAAKC,IAAIH,EAAG,GACtC,IAAOE,KAAKC,IAAIH,EAAI,EAAG,GAAK,IAGrCe,OAAQ,SAASf,GACf,OAAsC,EAA9BE,KAAKc,IAAIhB,GAAKE,KAAKe,GAAK,KAGlCC,QAAS,SAASlB,GAChB,OAAOE,KAAKiB,IAAInB,GAAKE,KAAKe,GAAK,KAGjCG,UAAW,SAASpB,GAClB,OAAQ,IAAOE,KAAKc,IAAId,KAAKe,GAAKjB,GAAK,IAGzCqB,OAAQ,SAASrB,GACf,OAAa,IAANA,EAAU,EAAIE,KAAKC,IAAI,EAAG,IAAMH,EAAI,KAG7CsB,QAAS,SAAStB,GAChB,OAAa,IAANA,EAAU,EAA4B,EAAvBE,KAAKC,IAAI,GAAI,GAAKH,IAG1CuB,UAAW,SAASvB,GAClB,OAAU,IAANA,EAAgB,EACV,IAANA,EAAgB,GACfA,GAAK,IAAO,EAAU,GAAME,KAAKC,IAAI,EAAG,IAAMH,EAAI,IAChD,IAAiC,EAAzBE,KAAKC,IAAI,GAAI,KAAOH,KAGrCwB,OAAQ,SAASxB,GACf,QAASE,KAAKuB,KAAK,EAAIzB,EAAIA,GAAK,IAGlC0B,QAAS,SAAS1B,GAChB,OAAOE,KAAKuB,KAAK,EAAIvB,KAAKC,IAAIH,EAAI,EAAG,KAGvC2B,UAAW,SAAS3B,GAClB,OAAKA,GAAK,IAAO,GAAW,IAAOE,KAAKuB,KAAK,EAAIzB,EAAIA,GAAK,GACnD,IAAOE,KAAKuB,KAAK,GAAKzB,GAAK,GAAKA,GAAK,IAG9C4B,UAAW,SAAS5B,GAClB,OAAIA,EAAI,EAAI,KACH,OAASA,EAAIA,EACXA,EAAI,EAAI,KACV,QAAUA,GAAK,IAAM,MAAQA,EAAI,IAC/BA,EAAI,IAAM,KACZ,QAAUA,GAAK,KAAO,MAAQA,EAAI,MAElC,QAAUA,GAAK,MAAQ,MAAQA,EAAI,SAI9C6B,OAAQ,SAAS7B,GACf,IAAI8B,EAAI,QACR,OAAO9B,EAAIA,IAAM8B,EAAI,GAAK9B,EAAI8B,IAGhCC,QAAS,SAAS/B,GAChB,IAAI8B,EAAI,QACR,OAAQ9B,GAAQ,GAAKA,IAAM8B,EAAI,GAAK9B,EAAI8B,GAAK,GAG/CE,UAAW,SAAShC,GAClB,IAAI8B,EAAI,QACR,OAAK9B,GAAK,IAAO,EAAiBA,EAAIA,IAAqB,GAAd8B,GAAK,QAAc9B,EAAI8B,GAAzC,GACpB,KAAQ9B,GAAK,GAAKA,IAAqB,GAAd8B,GAAK,QAAc9B,EAAI8B,GAAK,IAG9DG,QAAS,SAASjC,GAChB,OAAQ,EAAIE,KAAKC,IAAI,GAAI,EAAIH,GAAKE,KAAKiB,KAAU,EAAJnB,EAAQ,IAAM,EAAIE,KAAKe,IAAO,GAAK,GAGlFiB,YAAa,SAASlC,GACpB,IAAI8B,EAAI,QACR,OAAQ9B,GAAK,IAAO,EAAWA,EAAIA,IAAqB,GAAd8B,GAAK,QAAc9B,EAAI8B,GAAzC,GAA+C,KAAQ9B,GAAK,GAAKA,IAAqB,GAAd8B,GAAK,QAAc9B,EAAI8B,GAAK,IAG9HK,UAAW,SAASnC,GAClB,IAAI8B,EAAI,QACR,OAAO9B,EAAIA,IAAM8B,EAAI,GAAK9B,EAAI8B,IAGhCM,QAAS,SAASpC,GAChB,IAAI8B,EAAI,QACR,OAAQ9B,GAAK,GAAKA,IAAM8B,EAAI,GAAK9B,EAAI8B,GAAK,GAG5CO,OAAQ,SAASrC,GACf,OAAIA,EAAI,EAAI,KACH,OAASA,EAAIA,EACXA,EAAI,EAAI,KACV,QAAUA,GAAK,IAAM,MAAQA,EAAI,IAC/BA,EAAI,IAAM,KACZ,QAAUA,GAAK,KAAO,MAAQA,EAAI,MAElC,QAAUA,GAAK,MAAQ,MAAQA,EAAI,SAI9CsC,WAAY,SAAStC,GACnB,OAAIA,EAAI,EAAI,KACH,OAASA,EAAIA,EACXA,EAAI,EAAI,KACV,GAAK,QAAUA,GAAK,IAAM,MAAQA,EAAI,KACpCA,EAAI,IAAM,KACZ,GAAK,QAAUA,GAAK,KAAO,MAAQA,EAAI,OAEvC,GAAK,QAAUA,GAAK,MAAQ,MAAQA,EAAI,yBClKhCuC,aACnB,SAAAA,EAAYC,GAAOC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,GACjBI,KAAKH,KAAOA,EACZG,KAAKC,SAAWJ,EAChBG,KAAKE,QAAUF,KAAKG,OAAOC,KAAKJ,0DAIhCA,KAAKH,KAAOG,KAAKK,6CAGNR,GACX,IAAIS,EAAqB,IAAjB/C,KAAKiB,IAAIqB,GACjB,OAAOS,EAAI/C,KAAKgD,MAAMD,oCAItB,OAAON,KAAKQ,aAAaR,KAAKH,iBCjB3B,SAASY,EAASC,GACvB,IAAMC,EAAS,4CAA4CC,KAAKF,GAChE,MAAO,CACLG,EAAGC,SAASH,EAAO,GAAI,IACvBI,EAAGD,SAASH,EAAO,GAAI,IACvBK,EAAGF,SAASH,EAAO,GAAI,KCCpB,SAASM,EAAKC,EAAKC,EAAK9D,GAC7B,OAAO6D,GAAOC,EAAMD,GAAO7D,EAGtB,SAAS+D,EAAYP,EAAGQ,GAC7B,MAAO,CACLf,EAAGO,EAAItD,KAAKc,IAAIgD,GAChBC,EAAGT,EAAItD,KAAKiB,IAAI6C,IAIb,SAASE,EAAcV,EAAGW,EAAQC,GACvC,MAAO,CACLnB,EAAGO,EAAItD,KAAKiB,IAAIgD,GAAUjE,KAAKc,IAAIoD,GACnCH,EAAGT,EAAItD,KAAKiB,IAAIgD,GAAUjE,KAAKiB,IAAIiD,GACnCC,EAAGb,EAAItD,KAAKc,IAAImD,IAIb,SAASG,EAAeC,EAAMC,EAAKC,GACxC,IAAIC,EAAOxE,KAAKc,IAAIwD,GAChBG,EAAOzE,KAAKiB,IAAIqD,GAEhBI,EAAO1E,KAAKc,IAAIyD,GAChBI,EAAO3E,KAAKiB,IAAIsD,GAEhBK,EAAO5E,KAAKc,IAAIuD,GAChBQ,EAAO7E,KAAKiB,IAAIoD,GAcpB,MAAO,CAAES,IAZCN,EAAOE,EAYHK,IAXJP,EAAOG,EAAOE,EAAOJ,EAAOG,EAWnBI,IAVTR,EAAOG,EAAOC,EAAOH,EAAOI,EAUdI,IARdR,EAAOC,EAQYQ,IAPnBT,EAAOE,EAAOE,EAAOL,EAAOI,EAOJO,IANxBV,EAAOE,EAAOC,EAAOJ,EAAOK,EAMCO,KAJ5BT,EAIiCU,IAHlCX,EAAOG,EAGgCS,IAFvCZ,EAAOE,GAKZ,SAASW,EAATC,EAAAC,GAA0F,IAArEC,EAAqEF,EAAxEzC,EAAU4C,EAA8DH,EAAjEzB,EAAU6B,EAAuDJ,EAA1DrB,EACrC,MAAO,CACLpB,EAF6F0C,EAA/CX,IAErCY,EAFoFD,EAA1CV,IAE/BY,EAFyEF,EAArCT,IAEzBY,EAC/B7B,EAH6F0B,EAAhCR,IAGpDS,EAHoFD,EAA3BP,IAG9CS,EAHyEF,EAAtBN,IAGxCS,EAC/BzB,EAJ6FsB,EAAjBL,IAInEM,EAJoFD,EAAZJ,IAI7DM,EAJyEF,EAAPH,IAIvDM,GCjDnC,IAAMC,EAAmB,EACnBC,EAAyB,GAExB,SAASC,EAAeC,EAAQC,EAAQC,GAQ7C,IAPA,IAAMC,EACY,WAAhBH,EAAOI,KAqDX,SAAqCJ,EAAQC,GAC3C,IAAMI,EAAe,IAAIhE,EAAI2D,EAAO1D,MAC9BgE,EAAO1G,EAAOoG,EAAOO,SAC3B,OAAO,WACL,IDnEmBC,EAAG/C,EAAG3D,EA0DDiD,EAAGgB,ECSrB0C,GDnEaD,ECmEOX,EDnEJpC,ECmEsBuC,EAAOU,UDnE1B5G,ECmEqCwG,EAAKD,EAAazD,WAAaqD,EAASH,GDhEjG,CAAE/C,EAFCyD,EAAIxG,KAAK2G,IAAIlD,EAAI3D,GAAKE,KAAKc,IAAIhB,GAE7BiE,EADFyC,EAAIxG,KAAK2G,IAAIlD,EAAI3D,GAAKE,KAAKiB,IAAInB,KCkEjC8G,GDVkB7D,ECUQ0D,EAAW1D,EDVhBgB,ECUmB0C,EAAW1C,EDPpD,CAAET,EAFDtD,KAAKuB,KAAKwB,EAAIA,EAAIgB,EAAIA,GAElBjE,EADJE,KAAK6G,MAAM9C,EAAGhB,KCSd+D,EAAM9G,KAAKgD,MAAMqD,EAAazD,SAAWoD,EAAOe,MAChDC,EAAoB,EAAIhH,KAAKe,IAAM+F,EAAMd,EAAOe,MAChDE,EAAepD,EAAY+C,EAAYtD,EAAGsD,EAAY9G,EAAIkH,GAC1DE,EAAUxD,EAAK,EAAGsC,EAAOmB,OAAQvH,EAAOoG,EAAOoB,aAAaf,EAAazD,WACzEyE,EAAW3D,EAAK,EAAa,EAAV1D,KAAKe,GAAQsF,EAAazD,UAC7C0E,EAAW5D,EAAK,EAAa,EAAV1D,KAAKe,GAAQsF,EAAazD,UAC7C2E,EAAevD,EAAckD,EAASG,EAAUC,GACtD,MAAO,CACLvE,EAAGkE,EAAalE,EAAIwE,EAAaxE,EACjCgB,EAAGkD,EAAalD,EAAIwD,EAAaxD,EACjCI,EAAGqD,EAAaxB,EAAQK,EAAcJ,EAAQW,EAAYtD,GAAKiE,EAAapD,EAAI6B,EAAOyB,eArE9DC,CAA4B1B,EAAQC,GAkCnE,SAAuCD,EAAQC,GAC7C,IAAMI,EAAe,IAAIhE,EAAI2D,EAAO1D,MAC9BgE,EAAO1G,EAAOoG,EAAOO,SAC3B,OAAO,WACL,IAAMjD,EAAII,EAAK,EAAGuC,EAAQK,EAAKtG,KAAKuB,KAAK8E,EAAazD,YAChD9C,EAAI4D,EAAK,EAAa,EAAV1D,KAAKe,GAAQsF,EAAazD,UACtC+E,EAAiB9D,EAAYP,EAAGxD,GAChCoH,EAAUxD,EAAK,EAAGsC,EAAOmB,OAAQvH,EAAOoG,EAAOoB,aAAaf,EAAazD,WACzEyE,EAAW3D,EAAK,EAAa,EAAV1D,KAAKe,GAAQsF,EAAazD,UAC7C0E,EAAW5D,EAAK,EAAa,EAAV1D,KAAKe,GAAQsF,EAAazD,UAC7C2E,EAAevD,EAAckD,EAASG,EAAUC,GACtD,MAAO,CACLvE,EAAG4E,EAAe5E,EAAIwE,EAAaxE,EACnCgB,EAAG4D,EAAe5D,EAAIwD,EAAaxD,EACnCI,EAAGqD,EAAaxB,EAAQK,EAAcJ,EAAQ3C,GAAKiE,EAAapD,EAAI6B,EAAOyB,eAhDEG,CAA8B5B,EAAQC,GACjH4B,EAsBR,SAA4B7B,GAC1B,IAAM8B,EAAW,IAAIzF,EAAI2D,EAAO1D,MAC1ByF,EAAS/B,EAAOgC,UAAUC,IAAI/E,GACpC,OAAO,WACL,MAAO,CACLgF,KAAMJ,EAASlF,SACfuF,MAAOJ,EAAO/H,KAAKgD,MAAM8E,EAASlF,SAAWmF,EAAOK,WA5BjCC,CAAmBrC,GACpCsC,EAAkBlE,EAAe,EAAG8B,EAAM,GAC1CqC,EAAcnE,EAAe4B,EAAOwC,QAASxC,EAAOyC,QAASzC,EAAO0C,SAEtEC,EAAQ,GACHC,EAAI,EAAGA,EAAI5C,EAAO2C,MAAOC,IAAK,KAAAC,EACnB1C,IACZ2C,EAAyBvD,EAAO,CAAExC,EAFH8F,EAC/B9F,EACqCgB,EAFN8E,EAC5B9E,EACqCI,EAFT0E,EACzB1E,GACuCmE,GAC7CS,EAAsBxD,EAC1B,CACExC,EAAG+F,EAAuB/F,EAC1BgB,EAAG+E,EAAuB/E,EAC1BI,EAAG2E,EAAuB3E,GAE5BoE,GATmCS,EAWbnB,IAAhBK,EAX6Bc,EAW7Bd,KAAMC,EAXuBa,EAWvBb,MACdQ,EAAMM,KAAK,CAAEf,OAAMC,QAAOe,SAAUH,IAEtC,OAAOJ,EAsDT,SAASnB,EAAaxB,EAAQmD,EAAKlD,EAAQmD,GAIzC,OAHc,EAAIxJ,EAAOoG,EAAOqD,WAAWD,EAAQnD,IAC1BkD,EAAIvG,SAAWoD,EAAOsD,QAClCH,EAAIvG,SAAW,GAAM,GAAK,GCnFzC,IAAM2G,EAAmB,GACnBC,EAA6B,KAEtBC,EAAwB,CACnC,cACA,UACA,WACA,SACA,UACA,SACA,UACA,cACA,aACA,aACA,cAGa,SAASC,EAATlE,GAA6C,IAA3B0C,EAA2B1C,EAA3B0C,KAAMlC,EAAqBR,EAArBQ,OAAQ2D,EAAanE,EAAbmE,UACvCC,EAAqBC,IAAMC,OAAO,MAClCC,EAAoBF,IAAMC,OAAO,MACjC5D,EAAO2D,IAAMC,OAAO,GA+B1B,OA7BAD,IAAMG,gBAAgB,WACpB,IACMC,EADSN,EAAUO,QACNC,WAAW,MACxBC,EAAkBR,EAAmBM,QACvCG,EAAM,KAEJC,EAAU,WACVtE,EAAOuE,UACTrE,EAAKgE,UAAYlE,EAAOwE,WAAa,GAAKhB,EAC1CiB,EAAKL,EAAiBH,EAAKjE,EAAQE,EAAKgE,SACxCQ,KAEAD,EAAKL,EAAiBH,EAAKjE,EAAQE,EAAKgE,UAItCQ,EAAU,WACdL,EAAM7K,OAAOmL,sBAAsBL,IASrC,OAFAA,IAJgB,WACd9K,OAAOoL,qBAAqBP,KAM7B,CAACrE,EAAQ2D,IAGVkB,EAAArE,EAAAsE,cAAAD,EAAArE,EAAAuE,SAAA,KACEF,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,kBAAkBC,IAAKlB,EAAmBmB,MAAOhD,EAAMoB,OAAQpB,IACjF2C,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,mBAAmBC,IAAKrB,EAAoBsB,MAAOhD,EAAMoB,OAAQpB,IACnF2C,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,SAASC,IAAKtB,EAAWuB,MAAOhD,EAAMoB,OAAQpB,KAK/D,SAASuC,EAAKL,EAAiBe,EAAcnF,GAAkB,IAAVE,EAAUkF,UAAAhD,OAAA,QAAAiD,IAAAD,UAAA,GAAAA,UAAA,GAAH,EAC3DE,EAAqBlB,EAAgBD,WAAW,MAChDoB,EAAaD,EAAmBE,OAAON,MACvCjF,EAASsF,EAAa,EACtBE,EAAoC,aAAhBzF,EAAOI,KAAsBH,EAASsD,EAAmBtD,EAE7E0C,EAAQ5C,EAAeC,EAAQyF,EAAmBvF,GACxDoF,EAAmBI,UAAU,EAAG,EAAGH,EAAYA,GAC/C,IAAMI,EAAUL,EAAmBM,aAAa,EAAG,EAAGL,EAAYA,GAClE5C,EAAMkD,QAAQ,SAAAC,GAAI,OAOpB,SAAkBH,EAASJ,EAA3B9F,EAAiD0C,EAAOD,EAAM6D,GAAgB,IAArChJ,EAAqC0C,EAArC1C,EAAGgB,EAAkC0B,EAAlC1B,EAC1C,GAAIhB,EAAIwI,EAAa,GAAKxI,GAAKwI,EAAa,GAAKxH,EAAIwH,EAAa,GAAKxH,GAAKwH,EAAa,EACvF,OAGF,IAAMS,EAAQhM,KAAK2D,IAAI,EAAGuE,EAAO6D,GAEjCE,EAAUN,EAAQO,KAAMX,EAAYxI,EAAGgB,EAAGoE,EAAO,GACjD8D,EAAUN,EAAQO,KAAMX,EAAYxI,EAAI,EAAGgB,EAAGoE,EAAO6D,GACrDC,EAAUN,EAAQO,KAAMX,EAAYxI,EAAI,EAAGgB,EAAGoE,EAAO6D,GACrDC,EAAUN,EAAQO,KAAMX,EAAYxI,EAAGgB,EAAI,EAAGoE,EAAO6D,GACrDC,EAAUN,EAAQO,KAAMX,EAAYxI,EAAGgB,EAAI,EAAGoE,EAAO6D,GACrDC,EAAUN,EAAQO,KAAMX,EAAYxI,EAAI,EAAGgB,EAAI,EAAGoE,EAAO6D,GACzDC,EAAUN,EAAQO,KAAMX,EAAYxI,EAAI,EAAGgB,EAAI,EAAGoE,EAAO6D,GACzDC,EAAUN,EAAQO,KAAMX,EAAYxI,EAAI,EAAGgB,EAAI,EAAGoE,EAAO6D,GACzDC,EAAUN,EAAQO,KAAMX,EAAYxI,EAAI,EAAGgB,EAAI,EAAGoE,EAAO6D,GAtBnCG,CAASR,EAASJ,EAAYO,EAAK5C,SAAU4C,EAAK3D,MAAO2D,EAAK5D,KAAMlC,EAAOoG,aACjGd,EAAmBe,aAAaV,EAAS,EAAG,GAgC9C,SAA6BvB,EAAiBH,EAAKsB,EAAYvF,GAC7DiE,EAAIqC,yBAA2B,cAC/BrC,EAAIsC,OAAS,OACbtC,EAAIuC,UAAYxG,EAAOyG,WACvBxC,EAAIyC,SAAS,EAAG,EAAGnB,EAAYA,GAE3B7L,IACFsG,EAAO2G,OAAOd,QAAQ,SAAAe,GAGpB,GAFA3C,EAAIqC,yBAA2BM,EAAMC,MACrC5C,EAAIsC,OAASK,EAAME,KAAO,EAAb,QAAAC,OAAyBH,EAAME,KAA/B,OAA2C,OACrC,SAAfF,EAAMxG,KACR6D,EAAI+C,UAAU5C,EAAiB,EAAG,QAC7B,GAAmB,SAAfwC,EAAMxG,KAAiB,CAChC,IAAM6G,EAAWhD,EAAIiD,qBAAqB3B,EAAa,EAAGA,EAAa,EAAG,EAAGA,EAAa,EAAGA,EAAa,EAAGqB,EAAM1E,MACnH+E,EAASE,aAAa,EAAG,SACzBF,EAASE,aAAa,GAAKP,EAAMzE,OACjC8E,EAASE,aAAa,EAAG,eACzBlD,EAAIuC,UAAYS,EAChBhD,EAAIyC,SAAS,EAAG,EAAGnB,EAAYA,MAInCtB,EAAI+C,UAAU5C,EAAiB,EAAG,GApDpCgD,CAAoBhD,EAAiBe,EAAcI,EAAYvF,GAwDjE,SAAsBA,EAAQiE,EAAKsB,GAC7BvF,EAAOqH,YACTpD,EAAIqC,yBAA2B,cAC/BrC,EAAIsC,OAAS,OACbtC,EAAIqD,KAAO,aACXrD,EAAIuC,UAAY,4BAChBvC,EAAIsD,SAAS,mBAAoB,EAAGhC,EAAa,KA7DnDiC,CAAaxH,EAAQmF,EAAcI,GAqBrC,SAASU,EAAUwB,EAAQlC,EAAYxI,EAAGgB,EAA1C2J,EAA0D1B,GAAO,IAAlB1I,EAAkBoK,EAAlBpK,EAAGE,EAAekK,EAAflK,EAAGC,EAAYiK,EAAZjK,EAC7CkK,EAA2F,GAAlF3N,KAAKgD,MAAMD,GAAKwI,EAAa,GAAKvL,KAAKgD,MAAMe,GAAKwH,EAAa,GAAKA,GACnFkC,EAAOE,EAAQ,GAAKrK,EACpBmK,EAAOE,EAAQ,GAAKnK,EACpBiK,EAAOE,EAAQ,GAAKlK,EACpBgK,EAAOE,EAAQ,GAAK3N,KAAKgD,MAAM,IAAMgJ,eCvGhC,SAAS4B,EAAeC,GAC7B,YAAexC,IAARwC,EAGF,SAASC,EAAqBC,EAAOJ,EAAOK,GACjD,OAAOzL,OAAO0L,OAAO,GAAIF,EAAlBxL,OAAA2L,EAAA,EAAA3L,CAAA,GACJoL,EAAQK,IAIN,SAASG,EAAqBJ,EAAOJ,EAAOS,GAAW,IAAAC,EAC5D,OAAO9L,OAAO0L,OAAO,GAAIF,GAAlBM,EAAA,GAAA9L,OAAA2L,EAAA,EAAA3L,CAAA8L,EACJV,EAAQI,EAAMK,IADV7L,OAAA2L,EAAA,EAAA3L,CAAA8L,EAEJD,EAAYL,EAAMJ,IAFdU,ICJF,IAAMC,EAAiB,IAEjBC,EAAiB,CAC5BC,KAAM,UACNlM,KAAM,KACNqG,MAAO,IACP8D,WAAY,UACZzE,UAAW,CAAC,UAAW,UAAW,WAClCzB,QAAS,SACTY,OAAQ,IACRC,YAAa,UACbiC,UAAW,WACX5B,aAAc,GACd6B,OAAQ,GACRd,QAAS,GACTE,QAAS,EACTD,QAAS,EACT2D,UAAW,MACX7B,UAAU,EACVC,UAAW,GACXpE,KAAM,SACNuG,OAAQ,CACN,CAAEG,KAAM,GAAID,MAAO,cAAezG,KAAM,QACxC,CAAE0G,KAAM,EAAGD,MAAO,SAAUzG,KAAM,QAClC,CAAE0G,KAAM,GAAID,MAAO,UAAWzG,KAAM,QACpC,CAAE0G,KAAM,IAAKD,MAAO,cAAezG,KAAM,QACzC,CAAE0G,KAAM,GAAID,MAAO,UAAWzG,KAAM,OAAQ8B,KAAM,IAAKC,MAAO,WAC9D,CAAE2E,KAAM,GAAID,MAAO,UAAWzG,KAAM,OAAQ8B,KAAM,KAAMC,MAAO,WAC/D,CAAE/B,KAAM,OAAQyG,MAAO,cAAeC,KAAM,MAE9C/F,KAAM,EACNL,UAAW,KACX2G,WAAW,EACXoB,QAASH,GAGEI,EAAiB,CAC5BC,QAAS,CACPnG,QAAS,EACTE,QAAS,EACTD,QAAS,GAEXmG,SAAU,CACRpG,QAASxI,KAAKe,GAAK,EACnB2H,QAAS1I,KAAKe,GAAK,EACnB0H,QAAS,GAEXoG,OAAQ,CACNrG,QAAS,KACTE,QAAS,KACTD,QAAS,GAEXqG,aAAc,CACZtG,QAAS,IACTE,QAAS,IACTD,QAAS,KAEXsG,KAAM,CACJvG,QAAS,GACTE,QAAS,EACTD,QAAS,IAIAuG,EAAiB,CAC5BC,QAAS,CACPxC,WAAY,UACZzE,UAAW,CAAC,UAAW,UAAW,WAClCoE,UAAW,GACXO,OAAQ,CACN,CAAEG,KAAM,GAAID,MAAO,cAAezG,KAAM,QACxC,CAAE0G,KAAM,EAAGD,MAAO,SAAUzG,KAAM,QAClC,CAAE0G,KAAM,GAAID,MAAO,UAAWzG,KAAM,QACpC,CAAE0G,KAAM,IAAKD,MAAO,cAAezG,KAAM,QACzC,CAAE0G,KAAM,GAAID,MAAO,UAAWzG,KAAM,OAAQ8B,KAAM,IAAKC,MAAO,WAC9D,CAAE2E,KAAM,GAAID,MAAO,UAAWzG,KAAM,OAAQ8B,KAAM,KAAMC,MAAO,WAC/D,CAAE/B,KAAM,OAAQyG,MAAO,cAAeC,KAAM,OAGhDoC,MAAO,CACLzC,WAAY,UACZzE,UAAW,CAAC,UAAW,UAAW,WAClCoE,UAAW,GACXO,OAAQ,CACN,CAAEG,KAAM,KAAMD,MAAO,cAAezG,KAAM,QAC1C,CAAEA,KAAM,OAAQyG,MAAO,UAAWC,KAAM,MACxC,CAAEA,KAAM,MAAOD,MAAO,SAAUzG,KAAM,OAAQ8B,KAAM,MAAOC,MAAO,WAClE,CAAE/B,KAAM,OAAQyG,MAAO,SAAUC,KAAM,MACvC,CAAE1G,KAAM,OAAQyG,MAAO,SAAUC,KAAM,MACvC,CAAE1G,KAAM,OAAQyG,MAAO,UAAWC,KAAM,OAG5CqC,OAAQ,CACN1C,WAAY,UACZzE,UAAW,CAAC,UAAW,UAAW,WAClCoE,UAAW,IACXO,OAAQ,CACN,CAAEG,KAAM,KAAMD,MAAO,cAAezG,KAAM,QAC1C,CAAEA,KAAM,OAAQyG,MAAO,UAAWC,KAAM,KACxC,CAAEA,KAAM,KAAMD,MAAO,UAAWzG,KAAM,OAAQ8B,KAAM,MAAOC,MAAO,WAClE,CAAE2E,KAAM,KAAMD,MAAO,UAAWzG,KAAM,OAAQ8B,KAAM,MAAOC,MAAO,WAClE,CAAE2E,KAAM,KAAMD,MAAO,cAAezG,KAAM,OAAQ8B,KAAM,MAAOC,MAAO,WACtE,CAAE/B,KAAM,OAAQyG,MAAO,UAAWC,KAAM,QCtGxCsC,EAAsB,CAC1BC,cAAe,QACfC,aAAc,YACdC,aAAc,YACdC,cAAe,aACfC,aAAc,aAGD,SAASC,EAATlK,GAWZ,IAVDmK,EAUCnK,EAVDmK,QACA3J,EASCR,EATDQ,OACA4J,EAQCpK,EARDoK,SACAC,EAOCrK,EAPDqK,SACAC,EAMCtK,EANDsK,eACAC,EAKCvK,EALDuK,cACAC,EAICxK,EAJDwK,OACAC,EAGCzK,EAHDyK,aACAC,EAEC1K,EAFD0K,QACAC,EACC3K,EADD2K,iBAEMlF,EAAMpB,IAAMuG,UAAU,MAM5B,OAJAvG,IAAMwG,UAAU,WACdpF,EAAIf,QAAQoG,UAAYrF,EAAIf,QAAQqG,cACnC,CAACX,IAGF/E,EAAArE,EAAAsE,cAAA,OAAKG,IAAKA,EAAKD,UAAU,UACvBH,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,QACbH,EAAArE,EAAAsE,cAAA,+BADF,MACoC,IAClCD,EAAArE,EAAAsE,cAAA,KAAG0F,KAAK,oCAAoCC,OAAO,SAASC,IAAI,uBAAhE,mBAKJ7F,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,gBAAgB2F,QAASX,GACzCnF,EAAArE,EAAAsE,cAAA,QAAM8F,KAAK,MAAMC,aAAW,cAA5B,gBAEQ,IAHV,eAOFhG,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,gBAAgB2F,QAAST,GACzCrF,EAAArE,EAAAsE,cAAA,QAAME,UAAU,eAAe4F,KAAK,MAAMC,aAAW,SAArD,gBAEQ,IAHV,SAMAhG,EAAArE,EAAAsE,cAAA,KAAG0F,KAAK,gDAAgDC,OAAO,SAASC,IAAI,uBAC1E7F,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,iBAChBH,EAAArE,EAAAsE,cAAA,QAAME,UAAU,cAAc4F,KAAK,MAAMC,aAAW,SAApD,gBAEQ,IAHV,gBASHC,IAEAC,EAAO/K,EAAOwI,KAAM,SAAUmB,EAASG,EAAgB,CAAEkB,WAAY,oBAAWC,aAAclB,IAC9FmB,EAAM,OAAQlL,EAAQ,OAAQ6J,EAAU,CAAEmB,WAAY,oBAAWC,aAAchB,IAC/EL,GAAYsB,EAAM,SAAUlL,EAAQ,OAAQ6J,EAAU,CAAElM,IAAK,EAAGwN,KAAM,IACtED,EAAM,SAAUlL,EAAQ,QAAS6J,EAAU,CAAElM,IAAK,EAAGwN,KAAM,MAE3DC,EAAM,SACNL,EAAO/K,EAAM,KAAU,OAAQ,CAAC,SAAU,YAAa6J,GACvDkB,EAAO/K,EAAM,QAAa,UAAWzD,OAAO8O,KAAKzR,GAASiQ,GAC1DqB,EAAM,SAAUlL,EAAQ,SAAU6J,EAAU,CAAElM,IAAK,EAAGwN,KAAM,IAC5DvB,GAAYmB,EAAO/K,EAAM,YAAiB,cAAezD,OAAO8O,KAAKzR,GAASiQ,GAC9ED,GAAYmB,EAAO/K,EAAM,UAAe,YAAazD,OAAO8O,KAAKzR,GAASiQ,GAC1ED,GAAYsB,EAAM,SAAUlL,EAAQ,SAAU6J,EAAU,CAAElM,IAAK,EAAGwN,KAAM,IACxEvB,GACCsB,EAAM,SAAUlL,EAAQ,eAAgB6J,EAAU,CAChDlM,IAAK,EACLC,IAAK,EACLuN,KAAM,KAEO,WAAhBnL,EAAOI,MACNyE,EAAArE,EAAAsE,cAAAD,EAAArE,EAAAuE,SAAA,KACGmG,EAAM,QAASlL,EAAQ,OAAQ6J,EAAU,CACxClM,IAAK,EACLC,IAAK,GACLuN,KAAM,IAEPD,EAAM,QAASlL,EAAQ,YAAa6J,EAAU,CAC7ClM,IAAK,EACLC,IAAK,EACLuN,KAAM,QAKXC,EAAM,YACLxB,GACA/E,EAAArE,EAAAsE,cAAAD,EAAArE,EAAAuE,SAAA,MACIrL,KAAqBmL,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,SAAf,kDACvBH,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,iBAAiBsG,aAAa,GAAGzB,SAAU,SAAA0B,GAAC,OAAI1B,EAASb,EAAeuC,EAAEd,OAAOe,UACjG3G,EAAArE,EAAAsE,cAAA,UAAQ0G,MAAM,GAAGC,UAAQ,GAAzB,kBAGClP,OAAO8O,KAAKrC,GAAgB/G,IAAI,SAAAyJ,GAAM,OACrC7G,EAAArE,EAAAsE,cAAA,UAAQ0G,MAAOE,EAAQC,IAAKD,GACzBA,OAMV9B,GACC/E,EAAArE,EAAAsE,cAAAD,EAAArE,EAAAuE,SAAA,KACG6E,GAAYsB,EAAM,QAASlL,EAAQ,YAAa6J,EAAU,CAAElM,IAAK,EAAGC,IAAK,EAAGuN,KAAM,MAClFD,EAAM,QAASlL,EAAQ,aAAc6J,GACrC7J,EAAOgC,UAAUC,IAAI,SAAC2J,EAAGjE,GACxB,OAAOuD,EAAM,QAASlL,EAAQ,YAAa6J,EAAU,CAAElC,QAAOiC,eAE/DA,GACC/E,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,aAAa2F,QAASkB,EAAW7L,EAAQ,YAAa6J,IACtEhF,EAAArE,EAAAsE,cAAA,QAAM8F,KAAK,MAAMC,aAAW,aAA5B,gBAEQ,IAHV,cAQHjB,GAAYwB,EAAM,iBAClB1R,IACCmL,EAAArE,EAAAsE,cAAAD,EAAArE,EAAAuE,SAAA,KT7HH,kBAAkB1L,KAAKC,UAAUC,YS8HZsL,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,SAAS,kFACvChF,EAAO2G,OAAO1E,IAAI,SAAC2J,EAAGjE,GACrB,OAwMhB,SAAe3H,EAAQ2H,EAAOkC,GAC5B,IAAMjD,EAAQ5G,EAAO2G,OAAOgB,GACtBmE,EAAK,QAAA/E,OAAWY,GACtB,OACE9C,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,cAAc2G,IAAKG,GAChCjH,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,aACbH,EAAArE,EAAAsE,cAAA,UACEE,UAAU,OACVwG,MAAO5E,EAAMxG,KACbyJ,SAAU,SAAA0B,GACe,SAAnBA,EAAEd,OAAOe,MACX3B,EAAS,CACPlD,OAAQmB,EAAqB9H,EAAO2G,OAAQgB,EAAO,CAAEvH,KAAMmL,EAAEd,OAAOe,MAAO3E,MAAOD,EAAMC,MAAOC,KAAMF,EAAME,SAEjF,SAAnByE,EAAEd,OAAOe,OAClB3B,EAAS,CACPlD,OAAQmB,EAAqB9H,EAAO2G,OAAQgB,EAAhBpL,OAAAwP,EAAA,EAAAxP,CAAA,GACvBqK,EADuB,CAE1BxG,KAAMmL,EAAEd,OAAOe,MACftJ,KAAM,IACNC,MAAO,iBAMd,CAAC,OAAQ,QAAQF,IAAI,SAAAyJ,GAAM,OAC1B7G,EAAArE,EAAAsE,cAAA,UAAQ6G,IAAKD,EAAQF,MAAOE,GACzBA,MAKP7G,EAAArE,EAAAsE,cAAA,UACEE,UAAU,QACVwG,MAAO5E,EAAMC,MACbgD,SAAU,SAAA0B,GACR1B,EAAS,CACPlD,OAAQmB,EAAqB9H,EAAO2G,OAAQgB,EAAhBpL,OAAAwP,EAAA,EAAAxP,CAAA,GAA4BqK,EAA5B,CAAmCC,MAAO0E,EAAEd,OAAOe,aAIlF/H,EAAsBxB,IAAI,SAAAyJ,GAAM,OAC/B7G,EAAArE,EAAAsE,cAAA,UAAQ6G,IAAKD,EAAQF,MAAOE,GACzBtC,EAAoBsC,GAAUtC,EAAoBsC,GAAUA,MAKlE1L,EAAO2G,OAAOvE,OAAS,GACtByC,EAAArE,EAAAsE,cAAAD,EAAArE,EAAAuE,SAAA,KACEF,EAAArE,EAAAsE,cAAA,UACE2G,SAAoB,IAAV9D,EACVgD,QAAS,WACPd,EAAS,CACPlD,OAAQwB,EAAqBnI,EAAO2G,OAAQgB,EAAOA,EAAQ,OAJjE,UAUA9C,EAAArE,EAAAsE,cAAA,UACE2G,SAAU9D,IAAU3H,EAAO2G,OAAOvE,OAAS,EAC3CuI,QAAS,WACPd,EAAS,CACPlD,OAAQwB,EAAqBnI,EAAO2G,OAAQgB,EAAOA,EAAQ,OAJjE,UAUA9C,EAAArE,EAAAsE,cAAA,UACEE,UAAU,cACV2F,QAAS,WACPd,EAAS,CACPlD,OAAQmB,EAAqB9H,EAAO2G,OAAQgB,OAAOtC,GAAWkB,OAAOqB,OAJ3E,YAaN/C,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,aACbH,EAAArE,EAAAsE,cAAA,SAAOkH,QAAO,QAAAjF,OAAU+E,IAAxB,QACAjH,EAAArE,EAAAsE,cAAA,SACEmH,aAAa,MACbC,GAAE,QAAAnF,OAAU+E,GACZ1L,KAAK,SACL4E,UAAU,cACVwG,MAAO5E,EAAME,KACbnJ,IAAK,EACLkM,SAAU,SAAA0B,GACR1B,EAAS,CACPlD,OAAQmB,EAAqB9H,EAAO2G,OAAQgB,EAAhBpL,OAAAwP,EAAA,EAAAxP,CAAA,GAA4BqK,EAA5B,CAAmCE,KAAMyE,EAAEd,OAAOe,YAGlFW,QAASC,IAEK,SAAfxF,EAAMxG,MACLyE,EAAArE,EAAAsE,cAAAD,EAAArE,EAAAuE,SAAA,KACEF,EAAArE,EAAAsE,cAAA,SAAOkH,QAAO,QAAAjF,OAAU+E,IAAxB,QACAjH,EAAArE,EAAAsE,cAAA,SACEmH,aAAa,MACbC,GAAE,QAAAnF,OAAU+E,GACZ1L,KAAK,SACL4E,UAAU,cACVwG,MAAO5E,EAAM1E,KACbvE,IAAK,EACLkM,SAAU,SAAA0B,GACR1B,EAAS,CACPlD,OAAQmB,EAAqB9H,EAAO2G,OAAQgB,EAAhBpL,OAAAwP,EAAA,EAAAxP,CAAA,GAA4BqK,EAA5B,CAAmC1E,KAAMqJ,EAAEd,OAAOe,YAGlFW,QAASC,IAEXvH,EAAArE,EAAAsE,cAAA,SAAOkH,QAAO,SAAAjF,OAAW+E,IAAzB,SACAjH,EAAArE,EAAAsE,cAAA,SACEmH,aAAa,MACbC,GAAE,SAAAnF,OAAW+E,GACb1L,KAAK,QACL4E,UAAU,cACVwG,MAAO5E,EAAMzE,MACb0H,SAAU,SAAA0B,GACR1B,EAAS,CACPlD,OAAQmB,EAAqB9H,EAAO2G,OAAQgB,EAAhBpL,OAAAwP,EAAA,EAAAxP,CAAA,GAA4BqK,EAA5B,CAAmCzE,MAAOoJ,EAAEd,OAAOe,iBAtU1E5E,CAAM5G,EAAQ2H,EAAOkC,KAE9BhF,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,aAAa2F,QAASkB,EAAW7L,EAAQ,SAAU6J,IACnEhF,EAAArE,EAAAsE,cAAA,QAAM8F,KAAK,MAAMC,aAAW,oBAA5B,gBAEQ,IAHV,eASJhG,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,SAAS5L,IAAU,uCAA+B,+CAKtEgS,EAAM,WACLxB,GACA/E,EAAArE,EAAAsE,cAAA,UAAQE,UAAU,iBAAiBsG,aAAa,GAAGzB,SAAU,SAAA0B,GAAC,OAAI1B,EAASnB,EAAe6C,EAAEd,OAAOe,UACjG3G,EAAArE,EAAAsE,cAAA,UAAQ0G,MAAM,GAAGC,UAAQ,GAAzB,iBAGClP,OAAO8O,KAAK3C,GAAgBzG,IAAI,SAAAyJ,GAAM,OACrC7G,EAAArE,EAAAsE,cAAA,UAAQ0G,MAAOE,EAAQC,IAAKD,GACzBA,MAKR9B,GACCsB,EAAM,QAASlL,EAAQ,UAAW6J,EAAU,CAC1ClM,IAAK,EACLC,IAAe,EAAV5D,KAAKe,GACVoQ,KAAM,MAETvB,GACCsB,EAAM,QAASlL,EAAQ,UAAW6J,EAAU,CAC1ClM,IAAK,EACLC,IAAe,EAAV5D,KAAKe,GACVoQ,KAAM,MAETvB,GACCsB,EAAM,QAASlL,EAAQ,UAAW6J,EAAU,CAC1ClM,IAAK,EACLC,IAAe,EAAV5D,KAAKe,GACVoQ,KAAM,MAGTC,EAAM,SACNF,EAAM,WAAYlL,EAAQ,WAAY6J,GACtCD,GACC5J,EAAOuE,UACP2G,EAAM,SAAUlL,EAAQ,YAAa6J,EAAU,CAC7ClM,IAAK,GACLwN,KAAM,KAETvB,GAAYsB,EAAM,WAAYlL,EAAQ,YAAa6J,GACpDhF,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,SAAOE,UAAU,cAAcgH,QAAQ,YAAvC,WACW,IACTnH,EAAArE,EAAAsE,cAAA,QAAM8F,KAAK,MAAMC,aAAW,YAA5B,iBAIFhG,EAAArE,EAAAsE,cAAA,SACEoH,GAAG,WACHlH,UAAU,iBACV5E,KAAK,WACLoL,MAAO5B,EACPyC,QAASzC,EACTC,SAAU,SAAA0B,GAAC,OAAIpB,EAAiBoB,EAAEd,OAAO4B,aAI5CvB,KAKP,SAASe,EAAW7L,EAAQ2L,EAAK9B,GAC/B,IAAM9B,EAAQ/H,EAAO2L,GACrB,OAAO,WACL9B,EAAStN,OAAA2L,EAAA,EAAA3L,CAAA,GACNoP,EAAM5D,EAAMhB,OAAOgB,EAAMA,EAAM3F,OAAS,OAK/C,SAASgK,EAA0Bb,GACf,KAAdA,EAAEe,UACJf,EAAEgB,iBACFhB,EAAEd,OAAO3D,QAIb,SAASsE,EAAMoB,GACb,OACE3H,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,UAAK0H,IAKX,SAAS1B,IACP,OACEjG,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,YAKN,SAASoG,EAAM9K,EAAMJ,EAAQ2L,EAAK9B,GAAwB,IAAd4C,EAAcrH,UAAAhD,OAAA,QAAAiD,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAC5CuC,EAAuD8E,EAAvD9E,MAAOiC,EAAgD6C,EAAhD7C,SAAUoB,EAAsCyB,EAAtCzB,WAAYC,EAA0BwB,EAA1BxB,aAAiByB,EADEnQ,OAAAoQ,EAAA,EAAApQ,CACOkQ,EADP,kDAElDG,OAAqBvH,IAAVsC,EACX6D,EAAQoB,EAAW5M,EAAO2L,GAAKhE,GAAS3H,EAAO2L,GAC/CG,EAAQc,EAAQ,GAAA7F,OAAM4E,EAAN,KAAA5E,OAAaY,GAAUgE,EAC7C,OACE9G,EAAArE,EAAAsE,cAAA,OAAK6G,IAAKG,EAAO9G,UAAU,OACzBH,EAAArE,EAAAsE,cAAA,SAAOE,UAAU,cAAcgH,QAASF,GACrCA,GAEHjH,EAAArE,EAAAsE,cAAA,QAAAvI,OAAA0L,OAAA,CACEgE,aAAa,MACbC,GAAIJ,EACJ9G,UAAU,iBACV5E,KAAMA,EACNoL,MAAOA,EACPa,QAAkB,aAATjM,GAAsBJ,EAAO2L,GACtC9B,SAAU,SAAA0B,GACR,IAAMvD,EACK,aAAT5H,EACImL,EAAEd,OAAO4B,QACA,WAATjM,EACmB,KAAnBmL,EAAEd,OAAOe,MACP,GACAqB,WAAWtB,EAAEd,OAAOe,OACtBD,EAAEd,OAAOe,MAEb3B,EADE+C,EACOrQ,OAAA2L,EAAA,EAAA3L,CAAA,GACNoP,EAAM7D,EAAqB9H,EAAO2L,GAAMhE,EAAOK,IAGzCzL,OAAA2L,EAAA,EAAA3L,CAAA,GAAGoP,EAAM3D,KAGtBmE,QAASC,GACLM,IAEI,UAATtM,GAAoByE,EAAArE,EAAAsE,cAAA,SAAOE,UAAU,aAAa5E,KAAK,OAAO0M,UAAQ,EAACtB,MAAOA,IAC9EP,GACCpG,EAAArE,EAAAsE,cAAA,UAAQ6F,QAASM,GACfpG,EAAArE,EAAAsE,cAAA,QAAM8F,KAAK,MAAMC,aAAW,eACzBG,IAINpB,GAAYgD,GAAY5M,EAAO2L,GAAKvJ,OAAS,GAC5CyC,EAAArE,EAAAsE,cAAA,UACEE,UAAU,cACV2F,QAAS,WACPd,EAAStN,OAAA2L,EAAA,EAAA3L,CAAA,GACNoP,EAAM7D,EAAqB9H,EAAO2L,GAAMhE,OAAOtC,GAAWkB,OAAOqB,OAJxE,WAeR,SAASmD,EAAOS,EAAOG,EAAKc,EAAS5C,GAA6B,IAAnBkD,EAAmB3H,UAAAhD,OAAA,QAAAiD,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GACpD4F,EAA6B+B,EAA7B/B,WAAYC,EAAiB8B,EAAjB9B,aAEpB,OACEpG,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,OACbH,EAAArE,EAAAsE,cAAA,SAAOE,UAAU,cAAcgH,QAASL,GACrCA,GAEH9G,EAAArE,EAAAsE,cAAA,UAAQoH,GAAIP,EAAK3G,UAAU,iBAAiBwG,MAAOA,EAAO3B,SAAU,SAAA0B,GAAC,OAAI1B,EAAStN,OAAA2L,EAAA,EAAA3L,CAAA,GAAGoP,EAAMJ,EAAEd,OAAOe,UACjG,IACAiB,EAAQxK,IAAI,SAAAyJ,GAAM,OACjB7G,EAAArE,EAAAsE,cAAA,UAAQ6G,IAAKD,EAAQF,MAAOE,GACzBA,MAINT,GACCpG,EAAArE,EAAAsE,cAAA,UAAQ6F,QAASM,GACfpG,EAAArE,EAAAsE,cAAA,QAAM8F,KAAK,MAAMC,aAAW,eACzBG,gBCzUN,SAASgC,IACd,IAAMC,EAAOzT,OAAO0T,SAAS1C,KAAK2C,MAAM,KAAK,GAC7C,IACE,OAAOF,EAqBJ,SAAsBA,GAC3B,OAAOG,KAAKC,MAAMC,KAAKL,IAtBPM,CAAaN,QAAQ5H,EACnC,MAAAmI,GACA,QAeG,SAASC,EAAazN,GAC3B,OAAO0N,KAAKN,KAAKO,UAAU3N,ICzBtB,SAAS4N,EAAMC,GAAgC,IAAnBrC,EAAmBpG,UAAAhD,OAAA,QAAAiD,IAAAD,UAAA,GAAAA,UAAA,QAAXC,EACrC7L,OAAOsU,IACTtU,OAAOsU,GAAG,OAAQ,QAAS,CAAED,cAAaE,WAAYvC,ICM1D,IAAMwC,EAAc,KJPdC,aAAaC,QAAQ,mBAAqB5F,IAC5C2F,aAAaE,QACbF,aAAaG,QAAQ,gBAAiB9F,IKI1C+F,IAASC,OAAOzJ,EAAArE,EAAAsE,cDGD,WACb,IAAMnB,EAAYE,IAAMC,OAAO,MADHyK,EAGE1K,IAAM2K,SAANjS,OAAAwP,EAAA,EAAAxP,CAAA,CAC5BkS,QAASlG,GACN6E,KAAKC,MAAMY,aAAaC,QAAQ,YAAc,QALvBQ,EAAAnS,OAAAoS,EAAA,EAAApS,CAAAgS,EAAA,GAGrB5E,EAHqB+E,EAAA,GAGZE,EAHYF,EAAA,GAAAG,EAQIhL,IAAM2K,SAA8C,SAArCP,aAAaC,QAAQ,aARxCY,EAAAvS,OAAAoS,EAAA,EAAApS,CAAAsS,EAAA,GAQrBjF,EARqBkF,EAAA,GAQXC,EARWD,EAAA,GAUtBE,EAAgBhC,KAAiBrD,EAAQsE,aAAaC,QAAQ,gBAAkB3F,EAV1D0G,EAWKpL,IAAM2K,SAASQ,EAAcvG,UAAYH,EAAiB0G,EAAgBzG,GAX/E2G,EAAA3S,OAAAoS,EAAA,EAAApS,CAAA0S,EAAA,GAWrBjP,EAXqBkP,EAAA,GAWbC,EAXaD,EAAA,GA2D5B,OACErK,EAAArE,EAAAsE,cAAA,OAAKE,UAAU,UACbH,EAAArE,EAAAsE,cAACpB,EAAD,CAAQC,UAAWA,EAAWzB,KAAM8L,EAAahO,OAAQA,IACzD6E,EAAArE,EAAAsE,cAAC4E,EAAD,CACEC,QAASpN,OAAO8O,KAAK1B,GACrB3J,OAAQA,EACR4J,SAAUA,EACVI,OArDS,WACb4D,EAAM,QAAS,cACfjK,EAAUO,QAAQkL,OAAO,SAAAC,GACvBC,iBAAOD,EAAD,UAAAtI,OAAiB/G,EAAOwI,KAAxB,YAmDJyB,aAlCe,WACnB2D,EAAM,QAAS,eACf,IAAM2B,EAAUhT,OAAAwP,EAAA,EAAAxP,CAAA,GAAQoN,EAARpN,OAAA2L,EAAA,EAAA3L,CAAA,GAAkByD,EAAOwI,KAAOxI,IAChDiO,aAAaG,QAAQ,UAAWhB,KAAKO,UAAU4B,IAC/CtB,aAAaG,QAAQ,aAAcpO,EAAOwI,MAC1CoG,EAAWW,IA8BPxF,cAhDgB,WACpB6D,EAAM,QAAS,eACf4B,SAAStC,SAASD,KAAO,GACzBkC,EAAexF,EAAQsE,aAAaC,QAAQ,eAAiB,aA8CzDrE,SA3CW,SAAA2B,GACfoC,EAAM,eAAgBrR,OAAO8O,KAAKG,GAAO,IACzC,IAAMiE,EAASlT,OAAAwP,EAAA,EAAAxP,CAAA,GAAQyD,EAAWwL,GAClC2D,EAAeM,GACfD,SAAStC,SAASD,KAAOQ,EAAagC,IAwClC3F,eA7BiB,SAAA0B,GACrB,IAAMkE,EAAalE,EAAMxL,OACzB4N,EAAM,iBACNuB,EAAexF,EAAQ+F,IACvBzB,aAAaG,QAAQ,aAAcsB,IA0B/BxF,QAvBU,WACd0D,EAAM,QAAS,gBF9CZ,SAAwB+B,EAAKnD,EAAMoD,GACxC,IAAIC,EAAW,4BACTC,EAAS,CACbH,MACAnD,OACAoD,SAAUA,EAASG,KAAK,MAE1B,IAAK,IAAIC,KAAQF,EAAQD,GAAY,IAAMG,EAAO,IAAMC,mBAAmBH,EAAOE,IAClFxW,OAAO0W,KAAKL,EAAU,GAAI,sFEuCxBM,CF5DG,SAAqBnQ,GAC1B,SAAA+G,OAAUvN,OAAO0T,SAAS1C,KAAK2C,MAAM,KAAK,GAA1C,KAAApG,OAAgD0G,EAAazN,IE2D5CoQ,CAAYpQ,GAAS,6BAAyB,CAAC,kBAAmB,WAAY,UAsBzFmK,iBAnBmB,SAAAqB,GACvBoC,EAAM,kBAAmBpC,GACzBuD,EAAYvD,GACZyC,aAAaG,QAAQ,WAAY5C,QC3DrB,MAASgE,SAASa,eAAe","file":"static/js/main.795e2bd5.chunk.js","sourcesContent":["export function isSafari() {\n  return !!navigator.userAgent.match(/Version\\/[\\d.]+.*Safari/);\n}\n\nexport function isiOS() {\n  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n}\n\nexport function isAndroid() {\n  return /android|Android/.test(navigator.userAgent);\n}\n\nexport function isFirefox() {\n  return /firefox|Firefox/.test(navigator.userAgent);\n}\n\nexport function supportsEffects() {\n  return !isSafari() && !isiOS();\n}\n\nexport function isMobile() {\n  return isiOS() || isAndroid();\n}\n","export const Easing = {\n  linear: function(t) {\n    return t;\n  },\n  inQuad: function(t) {\n    return Math.pow(t, 2);\n  },\n  outQuad: function(t) {\n    return -(Math.pow(t - 1, 2) - 1);\n  },\n\n  inOutQuad: function(t) {\n    if ((t /= 0.5) < 1) return 0.5 * Math.pow(t, 2);\n    return -0.5 * ((t -= 2) * t - 2);\n  },\n\n  inCubic: function(t) {\n    return Math.pow(t, 3);\n  },\n\n  outCubic: function(t) {\n    return Math.pow(t - 1, 3) + 1;\n  },\n\n  inOutCubic: function(t) {\n    if ((t /= 0.5) < 1) return 0.5 * Math.pow(t, 3);\n    return 0.5 * (Math.pow(t - 2, 3) + 2);\n  },\n\n  inQuart: function(t) {\n    return Math.pow(t, 4);\n  },\n\n  outQuart: function(t) {\n    return -(Math.pow(t - 1, 4) - 1);\n  },\n\n  inOutQuart: function(t) {\n    if ((t /= 0.5) < 1) return 0.5 * Math.pow(t, 4);\n    return -0.5 * ((t -= 2) * Math.pow(t, 3) - 2);\n  },\n\n  inQuint: function(t) {\n    return Math.pow(t, 5);\n  },\n\n  outQuint: function(t) {\n    return Math.pow(t - 1, 5) + 1;\n  },\n\n  inOutQuint: function(t) {\n    if ((t /= 0.5) < 1) return 0.5 * Math.pow(t, 5);\n    return 0.5 * (Math.pow(t - 2, 5) + 2);\n  },\n\n  inSine: function(t) {\n    return -Math.cos(t * (Math.PI / 2)) + 1;\n  },\n\n  outSine: function(t) {\n    return Math.sin(t * (Math.PI / 2));\n  },\n\n  inOutSine: function(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n  },\n\n  inExpo: function(t) {\n    return t === 0 ? 0 : Math.pow(2, 10 * (t - 1));\n  },\n\n  outExpo: function(t) {\n    return t === 1 ? 1 : -Math.pow(2, -10 * t) + 1;\n  },\n\n  inOutExpo: function(t) {\n    if (t === 0) return 0;\n    if (t === 1) return 1;\n    if ((t /= 0.5) < 1) return 0.5 * Math.pow(2, 10 * (t - 1));\n    return 0.5 * (-Math.pow(2, -10 * --t) + 2);\n  },\n\n  inCirc: function(t) {\n    return -(Math.sqrt(1 - t * t) - 1);\n  },\n\n  outCirc: function(t) {\n    return Math.sqrt(1 - Math.pow(t - 1, 2));\n  },\n\n  inOutCirc: function(t) {\n    if ((t /= 0.5) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n  },\n\n  outBounce: function(t) {\n    if (t < 1 / 2.75) {\n      return 7.5625 * t * t;\n    } else if (t < 2 / 2.75) {\n      return 7.5625 * (t -= 1.5 / 2.75) * t + 0.75;\n    } else if (t < 2.5 / 2.75) {\n      return 7.5625 * (t -= 2.25 / 2.75) * t + 0.9375;\n    } else {\n      return 7.5625 * (t -= 2.625 / 2.75) * t + 0.984375;\n    }\n  },\n\n  inBack: function(t) {\n    var s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n\n  outBack: function(t) {\n    var s = 1.70158;\n    return (t = t - 1) * t * ((s + 1) * t + s) + 1;\n  },\n\n  inOutBack: function(t) {\n    var s = 1.70158;\n    if ((t /= 0.5) < 1) return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);\n  },\n\n  elastic: function(t) {\n    return -1 * Math.pow(4, -8 * t) * Math.sin(((t * 6 - 1) * (2 * Math.PI)) / 2) + 1;\n  },\n\n  swingFromTo: function(t) {\n    var s = 1.70158;\n    return (t /= 0.5) < 1 ? 0.5 * (t * t * (((s *= 1.525) + 1) * t - s)) : 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);\n  },\n\n  swingFrom: function(t) {\n    var s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n\n  swingTo: function(t) {\n    var s = 1.70158;\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\n  },\n\n  bounce: function(t) {\n    if (t < 1 / 2.75) {\n      return 7.5625 * t * t;\n    } else if (t < 2 / 2.75) {\n      return 7.5625 * (t -= 1.5 / 2.75) * t + 0.75;\n    } else if (t < 2.5 / 2.75) {\n      return 7.5625 * (t -= 2.25 / 2.75) * t + 0.9375;\n    } else {\n      return 7.5625 * (t -= 2.625 / 2.75) * t + 0.984375;\n    }\n  },\n\n  bouncePast: function(t) {\n    if (t < 1 / 2.75) {\n      return 7.5625 * t * t;\n    } else if (t < 2 / 2.75) {\n      return 2 - (7.5625 * (t -= 1.5 / 2.75) * t + 0.75);\n    } else if (t < 2.5 / 2.75) {\n      return 2 - (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375);\n    } else {\n      return 2 - (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375);\n    }\n  },\n};\n","export default class RNG {\n  constructor(seed) {\n    this.seed = seed;\n    this.original = seed;\n    this._random = this.random.bind(this);\n  }\n\n  reset() {\n    this.seed = this.orignal;\n  }\n\n  seededRandom(seed) {\n    let x = Math.sin(seed) * 10000;\n    return x - Math.floor(x);\n  }\n\n  random() {\n    return this.seededRandom(this.seed++);\n  }\n}\n","export function hexToRGB(hex) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16),\n  };\n}\n","export function spiral(a, b, t) {\n  const x = a * Math.exp(b * t) * Math.cos(t);\n  const y = a * Math.exp(b * t) * Math.sin(t);\n  return { x, y };\n}\n\nexport function lerp(min, max, t) {\n  return min + (max - min) * t;\n}\n\nexport function polarToCart(r, theta) {\n  return {\n    x: r * Math.cos(theta),\n    y: r * Math.sin(theta),\n  };\n}\n\nexport function polarToCart3d(r, theta1, theta2) {\n  return {\n    x: r * Math.sin(theta1) * Math.cos(theta2),\n    y: r * Math.sin(theta1) * Math.sin(theta2),\n    z: r * Math.cos(theta1),\n  };\n}\n\nexport function rotationMatrix(roll, yaw, pitch) {\n  let cosa = Math.cos(yaw);\n  let sina = Math.sin(yaw);\n\n  let cosb = Math.cos(pitch);\n  let sinb = Math.sin(pitch);\n\n  let cosc = Math.cos(roll);\n  let sinc = Math.sin(roll);\n\n  let Axx = cosa * cosb;\n  let Axy = cosa * sinb * sinc - sina * cosc;\n  let Axz = cosa * sinb * cosc + sina * sinc;\n\n  let Ayx = sina * cosb;\n  let Ayy = sina * sinb * sinc + cosa * cosc;\n  let Ayz = sina * sinb * cosc - cosa * sinc;\n\n  let Azx = -sinb;\n  let Azy = cosb * sinc;\n  let Azz = cosb * cosc;\n\n  return { Axx, Axy, Axz, Ayx, Ayy, Ayz, Azx, Azy, Azz };\n}\n\nexport function rotate({ x: px, y: py, z: pz }, { Axx, Axy, Axz, Ayx, Ayy, Ayz, Azx, Azy, Azz }) {\n  return {\n    x: Axx * px + Axy * py + Axz * pz,\n    y: Ayx * px + Ayy * py + Ayz * pz,\n    z: Azx * px + Azy * py + Azz * pz,\n  };\n}\n\nexport function cartToPolar(x, y) {\n  let r = Math.sqrt(x * x + y * y);\n  let t = Math.atan2(y, x);\n  return { r, t };\n}\n","import { Easing } from '../utils/easing';\nimport RNG from '../utils/random';\nimport { hexToRGB } from '../utils/color';\nimport { rotationMatrix, lerp, spiral, rotate, polarToCart, cartToPolar, polarToCart3d } from '../utils/math';\n\nconst STATIC_ARM_CURVE = 2;\nconst STATIC_ARM_SCALE_RATIO = 28;\n\nexport function getGalaxyStars(preset, radius, time) {\n  const getRandomPosition =\n    preset.type === 'spiral' ? getSpiralPositionRandomizer(preset, radius, time) : getGloburalPositionRandomizer(preset, radius, time);\n  const getRandomStyle = getStyleRandomizer(preset);\n  const animationMatrix = rotationMatrix(0, time, 0);\n  const cameraMtrix = rotationMatrix(preset.cameraX, preset.cameraZ, preset.cameraY);\n\n  let stars = [];\n  for (let i = 0; i < preset.stars; i++) {\n    let { x, y, z } = getRandomPosition();\n    const animationRotatedVector = rotate({ x, y, z }, animationMatrix);\n    const cameraRotatedVector = rotate(\n      {\n        x: animationRotatedVector.x,\n        y: animationRotatedVector.y,\n        z: animationRotatedVector.z,\n      },\n      cameraMtrix\n    );\n    const { size, color } = getRandomStyle();\n    stars.push({ size, color, position: cameraRotatedVector });\n  }\n  return stars;\n}\n\nfunction getStyleRandomizer(preset) {\n  const styleRNG = new RNG(preset.seed);\n  const colors = preset.starColor.map(hexToRGB);\n  return () => {\n    return {\n      size: styleRNG.random(),\n      color: colors[Math.floor(styleRNG.random() * colors.length)],\n    };\n  };\n}\n\nfunction getGloburalPositionRandomizer(preset, radius) {\n  const positionsRNG = new RNG(preset.seed);\n  const ease = Easing[preset.density];\n  return () => {\n    const r = lerp(0, radius, ease(Math.sqrt(positionsRNG.random())));\n    const t = lerp(0, Math.PI * 2, positionsRNG.random());\n    const globularCoords = polarToCart(r, t);\n    const spreadR = lerp(0, preset.spread, Easing[preset.spreadShape](positionsRNG.random()));\n    const spreadT1 = lerp(0, Math.PI * 2, positionsRNG.random());\n    const spreadT2 = lerp(0, Math.PI * 2, positionsRNG.random());\n    const spreadCoords = polarToCart3d(spreadR, spreadT1, spreadT2);\n    return {\n      x: globularCoords.x + spreadCoords.x,\n      y: globularCoords.y + spreadCoords.y,\n      z: getZPosition(preset, positionsRNG, radius, r) + spreadCoords.z * preset.heightSpread,\n    };\n  };\n}\n\nfunction getSpiralPositionRandomizer(preset, radius) {\n  const positionsRNG = new RNG(preset.seed);\n  const ease = Easing[preset.density];\n  return () => {\n    const spiralCart = spiral(STATIC_ARM_CURVE, preset.armsCurve, ease(positionsRNG.random()) * (radius / STATIC_ARM_SCALE_RATIO));\n    const spiralPolar = cartToPolar(spiralCart.x, spiralCart.y);\n    const arm = Math.floor(positionsRNG.random() * preset.arms);\n    const armAngleTransform = 2 * Math.PI * (arm / preset.arms);\n    const spiralCoords = polarToCart(spiralPolar.r, spiralPolar.t + armAngleTransform);\n    const spreadR = lerp(0, preset.spread, Easing[preset.spreadShape](positionsRNG.random()));\n    const spreadT1 = lerp(0, Math.PI * 2, positionsRNG.random());\n    const spreadT2 = lerp(0, Math.PI * 2, positionsRNG.random());\n    const spreadCoords = polarToCart3d(spreadR, spreadT1, spreadT2);\n    return {\n      x: spiralCoords.x + spreadCoords.x,\n      y: spiralCoords.y + spreadCoords.y,\n      z: getZPosition(preset, positionsRNG, radius, spiralPolar.r) + spreadCoords.z * preset.heightSpread,\n    };\n  };\n}\n\nfunction getZPosition(preset, rng, radius, starR) {\n  const ratio = 1 - Easing[preset.sideShape](starR / radius);\n  const position = ratio * rng.random() * preset.height;\n  const side = rng.random() > 0.5 ? 1 : -1;\n  return position * side;\n}\n","import React from 'react';\nimport { supportsEffects } from '../utils/browser';\nimport { getGalaxyStars } from '../logic/galaxy';\n\nconst GLOBULAR_PADDING = 20;\nconst ANIMATION_SPEED_MULTIPLIER = 0.0001;\n\nexport const AVAILABLE_BLEND_MODES = [\n  'source-over',\n  'lighter',\n  'multiply',\n  'screen',\n  'overlay',\n  'darken',\n  'lighten',\n  'color-dodge',\n  'color-burn',\n  'hard-light',\n  'soft-light',\n];\n\nexport default function Canvas({ size, preset, canvasRef }) {\n  const offscreenCanvasRef = React.useRef(null);\n  const texturesCanvasRef = React.useRef(null);\n  const time = React.useRef(0);\n\n  React.useLayoutEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const offscreenCanvas = offscreenCanvasRef.current;\n    let raf = null;\n\n    const onFrame = () => {\n      if (preset.animated) {\n        time.current += (preset.animSpeed || 0) * ANIMATION_SPEED_MULTIPLIER;\n        draw(offscreenCanvas, ctx, preset, time.current);\n        loopRaf();\n      } else {\n        draw(offscreenCanvas, ctx, preset, time.current);\n      }\n    };\n\n    const loopRaf = () => {\n      raf = window.requestAnimationFrame(onFrame);\n    };\n\n    const stopRaf = () => {\n      window.cancelAnimationFrame(raf);\n    };\n\n    onFrame();\n\n    return stopRaf;\n  }, [preset, canvasRef]);\n\n  return (\n    <>\n      <canvas className=\"textures-canvas\" ref={texturesCanvasRef} width={size} height={size} />\n      <canvas className=\"offscreen-canvas\" ref={offscreenCanvasRef} width={size} height={size} />\n      <canvas className=\"canvas\" ref={canvasRef} width={size} height={size} />\n    </>\n  );\n}\n\nexport function draw(offscreenCanvas, presentedCtx, preset, time = 0) {\n  const offscreenCanvasCtx = offscreenCanvas.getContext('2d');\n  const canvasSize = offscreenCanvasCtx.canvas.width;\n  const radius = canvasSize / 2;\n  const transformedRadius = preset.type === 'globular' ? radius - GLOBULAR_PADDING : radius;\n\n  const stars = getGalaxyStars(preset, transformedRadius, time);\n  offscreenCanvasCtx.clearRect(0, 0, canvasSize, canvasSize);\n  const imgData = offscreenCanvasCtx.getImageData(0, 0, canvasSize, canvasSize);\n  stars.forEach(star => drawStar(imgData, canvasSize, star.position, star.color, star.size, preset.luminance));\n  offscreenCanvasCtx.putImageData(imgData, 0, 0);\n\n  finalizeWithEffects(offscreenCanvas, presentedCtx, canvasSize, preset);\n  addWatermark(preset, presentedCtx, canvasSize);\n}\n\nfunction drawStar(imgData, canvasSize, { x, y }, color, size, sizeMultiplier) {\n  if (x > canvasSize / 2 || x < -canvasSize / 2 || y > canvasSize / 2 || y < -canvasSize / 2) {\n    return;\n  }\n\n  const alpha = Math.min(1, size * sizeMultiplier);\n\n  drawPixel(imgData.data, canvasSize, x, y, color, 1);\n  drawPixel(imgData.data, canvasSize, x + 1, y, color, alpha);\n  drawPixel(imgData.data, canvasSize, x - 1, y, color, alpha);\n  drawPixel(imgData.data, canvasSize, x, y + 1, color, alpha);\n  drawPixel(imgData.data, canvasSize, x, y - 1, color, alpha);\n  drawPixel(imgData.data, canvasSize, x + 1, y - 1, color, alpha);\n  drawPixel(imgData.data, canvasSize, x + 1, y + 1, color, alpha);\n  drawPixel(imgData.data, canvasSize, x - 1, y - 1, color, alpha);\n  drawPixel(imgData.data, canvasSize, x - 1, y + 1, color, alpha);\n}\n\nfunction drawPixel(pixels, canvasSize, x, y, { r, g, b }, alpha) {\n  const index = (Math.floor(x) + canvasSize / 2 + (Math.floor(y) + canvasSize / 2) * canvasSize) * 4;\n  pixels[index + 0] = r;\n  pixels[index + 1] = g;\n  pixels[index + 2] = b;\n  pixels[index + 3] = Math.floor(255 * alpha);\n}\n\nfunction finalizeWithEffects(offscreenCanvas, ctx, canvasSize, preset) {\n  ctx.globalCompositeOperation = 'source-over';\n  ctx.filter = 'none';\n  ctx.fillStyle = preset.spaceColor;\n  ctx.fillRect(0, 0, canvasSize, canvasSize);\n\n  if (supportsEffects()) {\n    preset.layers.forEach(layer => {\n      ctx.globalCompositeOperation = layer.blend;\n      ctx.filter = layer.blur > 0 ? `blur(${layer.blur}px)` : 'none';\n      if (layer.type === 'glow') {\n        ctx.drawImage(offscreenCanvas, 0, 0);\n      } else if (layer.type === 'core') {\n        const gradient = ctx.createRadialGradient(canvasSize / 2, canvasSize / 2, 0, canvasSize / 2, canvasSize / 2, layer.size);\n        gradient.addColorStop(0, 'white');\n        gradient.addColorStop(0.5, layer.color);\n        gradient.addColorStop(1, 'transparent');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, canvasSize, canvasSize);\n      }\n    });\n  } else {\n    ctx.drawImage(offscreenCanvas, 0, 0);\n  }\n}\n\nfunction addWatermark(preset, ctx, canvasSize) {\n  if (preset.watermark) {\n    ctx.globalCompositeOperation = 'source-over';\n    ctx.filter = 'none';\n    ctx.font = '18px Arial';\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.75)';\n    ctx.fillText('creategalaxy.com', 7, canvasSize - 10);\n  }\n}\n","export function isNotUndefined(val) {\n  return val !== undefined;\n}\n\nexport function immutableIndexUpdate(array, index, newValue) {\n  return Object.assign([], array, {\n    [index]: newValue,\n  });\n}\n\nexport function immutableIndexSwitch(array, index, withIndex) {\n  return Object.assign([], array, {\n    [index]: array[withIndex],\n    [withIndex]: array[index],\n  });\n}\n","export function invalidatePresetCacheIfNeeded() {\n  if (localStorage.getItem('presetVersion') !== PRESET_VERSION) {\n    localStorage.clear();\n    localStorage.setItem('presetVersion', PRESET_VERSION);\n  }\n}\n\nexport const PRESET_VERSION = '2';\n\nexport const DEFAULT_PRESET = {\n  name: 'default',\n  seed: 1234,\n  stars: 30000,\n  spaceColor: '#020e26',\n  starColor: ['#EEEDBE', '#0388A6', '#E9F2EB'],\n  density: 'inQuad',\n  spread: 700,\n  spreadShape: 'inCubic',\n  sideShape: 'outCubic',\n  heightSpread: 0.1,\n  height: 25,\n  cameraX: 0.5,\n  cameraY: 1,\n  cameraZ: 2,\n  luminance: '0.1',\n  animated: false,\n  animSpeed: 20,\n  type: 'spiral',\n  layers: [\n    { blur: 10, blend: 'source-over', type: 'glow' },\n    { blur: 5, blend: 'screen', type: 'glow' },\n    { blur: 10, blend: 'lighten', type: 'glow' },\n    { blur: '3', blend: 'source-over', type: 'glow' },\n    { blur: 30, blend: 'overlay', type: 'core', size: 300, color: '#c5e2e3' },\n    { blur: 30, blend: 'lighter', type: 'core', size: '80', color: '#c5e2e3' },\n    { type: 'glow', blend: 'color-dodge', blur: '0' },\n  ],\n  arms: 2,\n  armsCurve: 0.275,\n  watermark: true,\n  version: PRESET_VERSION,\n};\n\nexport const CAMERA_PRESETS = {\n  topDown: {\n    cameraX: 0.0,\n    cameraY: 0.0,\n    cameraZ: 0.0,\n  },\n  sideways: {\n    cameraX: Math.PI / 2,\n    cameraY: Math.PI / 2,\n    cameraZ: 0.0,\n  },\n  tilted: {\n    cameraX: 2.25,\n    cameraY: 2.25,\n    cameraZ: 0.0,\n  },\n  semiSideways: {\n    cameraX: 2.7,\n    cameraY: 1.7,\n    cameraZ: 1.3,\n  },\n  nice: {\n    cameraX: 0.5,\n    cameraY: 1.0,\n    cameraZ: 2.0,\n  },\n};\n\nexport const EFFECT_PRESETS = {\n  angelic: {\n    spaceColor: '#030A23',\n    starColor: ['#EEEDBE', '#0388A6', '#E9F2EB'],\n    luminance: 0.1,\n    layers: [\n      { blur: 10, blend: 'source-over', type: 'glow' },\n      { blur: 5, blend: 'screen', type: 'glow' },\n      { blur: 10, blend: 'lighten', type: 'glow' },\n      { blur: '3', blend: 'source-over', type: 'glow' },\n      { blur: 30, blend: 'overlay', type: 'core', size: 300, color: '#c5e2e3' },\n      { blur: 30, blend: 'lighter', type: 'core', size: '80', color: '#c5e2e3' },\n      { type: 'glow', blend: 'color-dodge', blur: '1' },\n    ],\n  },\n  milky: {\n    spaceColor: '#030207',\n    starColor: ['#ddebe1', '#f9d972', '#61acf8'],\n    luminance: 0.7,\n    layers: [\n      { blur: '50', blend: 'source-over', type: 'glow' },\n      { type: 'glow', blend: 'lighter', blur: '20' },\n      { blur: '120', blend: 'screen', type: 'core', size: '200', color: '#f4710d' },\n      { type: 'glow', blend: 'screen', blur: '20' },\n      { type: 'glow', blend: 'screen', blur: '20' },\n      { type: 'glow', blend: 'lighter', blur: '1' },\n    ],\n  },\n  sauron: {\n    spaceColor: '#120926',\n    starColor: ['#ff1c00', '#ffaa85', '#e1f200'],\n    luminance: 0.45,\n    layers: [\n      { blur: '20', blend: 'source-over', type: 'glow' },\n      { type: 'glow', blend: 'lighter', blur: '4' },\n      { blur: '50', blend: 'overlay', type: 'core', size: '700', color: '#f55009' },\n      { blur: '30', blend: 'lighter', type: 'core', size: '300', color: '#f55009' },\n      { blur: '30', blend: 'color-dodge', type: 'core', size: '100', color: '#d8e300' },\n      { type: 'glow', blend: 'lighter', blur: '1' },\n    ],\n  },\n};\n","import React from 'react';\nimport { Easing } from '../utils/easing';\nimport { isNotUndefined, immutableIndexUpdate, immutableIndexSwitch } from '../utils/misc';\nimport { supportsEffects, isiOS, isFirefox } from '../utils/browser';\nimport { AVAILABLE_BLEND_MODES } from './Canvas';\nimport { CAMERA_PRESETS, EFFECT_PRESETS } from '../presets';\n\nconst BLEND_MODES_TO_TEXT = {\n  'source-over': 'plain',\n  'soft-light': 'softLight',\n  'hard-light': 'hardLight',\n  'color-dodge': 'colorDodge',\n  'color-burn': 'colorBurn',\n};\n\nexport default function Inputs({\n  presets,\n  preset,\n  advanced,\n  onChange,\n  onChangePreset,\n  onUndoChanges,\n  onSave,\n  onSavePreset,\n  onShare,\n  onChangeAdvanced,\n}) {\n  const ref = React.createRef(null);\n\n  React.useEffect(() => {\n    ref.current.scrollTop = ref.current.scrollHeight;\n  }, [advanced]); // eslint-disable-line\n\n  return (\n    <div ref={ref} className=\"inputs\">\n      <div className=\"row\">\n        <div className=\"info\">\n          <strong>#creategalaxy</strong> by{' '}\n          <a href=\"https://twitter.com/ShayHDavidson\" target=\"_blank\" rel=\"noopener noreferrer\">\n            @ShayDavidson\n          </a>\n        </div>\n      </div>\n      <div className=\"row\">\n        <button className=\"action-button\" onClick={onSave}>\n          <span role=\"img\" aria-label=\"save-image\">\n            📷\n          </span>{' '}\n          Save Image\n        </button>\n      </div>\n      <div className=\"row\">\n        <button className=\"action-button\" onClick={onShare}>\n          <span className=\"twitter-icon\" role=\"img\" aria-label=\"share\">\n            🐔\n          </span>{' '}\n          Share\n        </button>\n        <a href=\"https://github.com/ShayDavidson/create-galaxy\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <button className=\"action-button\">\n            <span className=\"github-icon\" role=\"img\" aria-label=\"share\">\n              👫\n            </span>{' '}\n            Contribute\n          </button>\n        </a>\n      </div>\n\n      {separator()}\n\n      {select(preset.name, 'preset', presets, onChangePreset, { buttonIcon: '↩️ Undo', buttonAction: onUndoChanges })}\n      {input('text', preset, 'name', onChange, { buttonIcon: '💾 Save', buttonAction: onSavePreset })}\n      {advanced && input('number', preset, 'seed', onChange, { min: 0, step: 1 })}\n      {input('number', preset, 'stars', onChange, { min: 0, step: 5000 })}\n\n      {title('Shape')}\n      {select(preset['type'], 'type', ['spiral', 'globular'], onChange)}\n      {select(preset['density'], 'density', Object.keys(Easing), onChange)}\n      {input('number', preset, 'spread', onChange, { min: 0, step: 1 })}\n      {advanced && select(preset['spreadShape'], 'spreadShape', Object.keys(Easing), onChange)}\n      {advanced && select(preset['sideShape'], 'sideShape', Object.keys(Easing), onChange)}\n      {advanced && input('number', preset, 'height', onChange, { min: 0, step: 1 })}\n      {advanced &&\n        input('number', preset, 'heightSpread', onChange, {\n          min: 0,\n          max: 1,\n          step: 0.1,\n        })}\n      {preset.type === 'spiral' && (\n        <>\n          {input('range', preset, 'arms', onChange, {\n            min: 1,\n            max: 10,\n            step: 1,\n          })}\n          {input('range', preset, 'armsCurve', onChange, {\n            min: 0,\n            max: 5,\n            step: 0.025,\n          })}\n        </>\n      )}\n\n      {title('Effects')}\n      {!advanced && (\n        <>\n          {!supportsEffects() && <div className=\"error\">Effects are partial in iOS/Safari 😞</div>}\n          <select className=\"standard-input\" defaultValue=\"\" onChange={e => onChange(EFFECT_PRESETS[e.target.value])}>\n            <option value=\"\" disabled>\n              Effects Preset\n            </option>\n            {Object.keys(EFFECT_PRESETS).map(option => (\n              <option value={option} key={option}>\n                {option}\n              </option>\n            ))}\n          </select>\n        </>\n      )}\n      {advanced && (\n        <>\n          {advanced && input('range', preset, 'luminance', onChange, { min: 0, max: 1, step: 0.05 })}\n          {input('color', preset, 'spaceColor', onChange)}\n          {preset.starColor.map((_, index) => {\n            return input('color', preset, 'starColor', onChange, { index, advanced });\n          })}\n          {advanced && (\n            <div className=\"row\">\n              <button className=\"add-button\" onClick={addToArray(preset, 'starColor', onChange)}>\n                <span role=\"img\" aria-label=\"add-color\">\n                  🎨\n                </span>{' '}\n                Add color\n              </button>\n            </div>\n          )}\n          {advanced && title('Effect Layers')}\n          {supportsEffects() ? (\n            <>\n              {isFirefox() && <div className=\"error\">{'⚠️ Animated blur effect are slow in Firefox 🔥🦊'}</div>}\n              {preset.layers.map((_, index) => {\n                return layer(preset, index, onChange);\n              })}\n              <div className=\"row\">\n                <button className=\"add-button\" onClick={addToArray(preset, 'layers', onChange)}>\n                  <span role=\"img\" aria-label=\"add-effect-layer\">\n                    💥\n                  </span>{' '}\n                  Add layer\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"error\">{isiOS() ? 'Not supported in iPhone 😞' : 'Not supported in this browser 😞'}</div>\n          )}\n        </>\n      )}\n\n      {title('Camera')}\n      {!advanced && (\n        <select className=\"standard-input\" defaultValue=\"\" onChange={e => onChange(CAMERA_PRESETS[e.target.value])}>\n          <option value=\"\" disabled>\n            Camera Preset\n          </option>\n          {Object.keys(CAMERA_PRESETS).map(option => (\n            <option value={option} key={option}>\n              {option}\n            </option>\n          ))}\n        </select>\n      )}\n      {advanced &&\n        input('range', preset, 'cameraX', onChange, {\n          min: 0,\n          max: Math.PI * 2,\n          step: 0.05,\n        })}\n      {advanced &&\n        input('range', preset, 'cameraY', onChange, {\n          min: 0,\n          max: Math.PI * 2,\n          step: 0.05,\n        })}\n      {advanced &&\n        input('range', preset, 'cameraZ', onChange, {\n          min: 0,\n          max: Math.PI * 2,\n          step: 0.05,\n        })}\n\n      {title('Extra')}\n      {input('checkbox', preset, 'animated', onChange)}\n      {advanced &&\n        preset.animated &&\n        input('number', preset, 'animSpeed', onChange, {\n          min: 0.1,\n          step: 0.1,\n        })}\n      {advanced && input('checkbox', preset, 'watermark', onChange)}\n      <div className=\"row\">\n        <label className=\"input-label\" htmlFor=\"advanced\">\n          advanced{' '}\n          <span role=\"img\" aria-label=\"advanced\">\n            🧐\n          </span>\n        </label>\n        <input\n          id=\"advanced\"\n          className=\"standard-input\"\n          type=\"checkbox\"\n          value={advanced}\n          checked={advanced}\n          onChange={e => onChangeAdvanced(e.target.checked)}\n        />\n      </div>\n\n      {separator()}\n    </div>\n  );\n}\n\nfunction addToArray(preset, key, onChange) {\n  const array = preset[key];\n  return () => {\n    onChange({\n      [key]: array.concat(array[array.length - 1]),\n    });\n  };\n}\n\nfunction fixAndroidKeyboardDismiss(e) {\n  if (e.keyCode === 13) {\n    e.preventDefault();\n    e.target.blur();\n  }\n}\n\nfunction title(text) {\n  return (\n    <div className=\"row\">\n      <h4>{text}</h4>\n    </div>\n  );\n}\n\nfunction separator() {\n  return (\n    <div className=\"row\">\n      <hr />\n    </div>\n  );\n}\n\nfunction input(type, preset, key, onChange, options = {}) {\n  const { index, advanced, buttonIcon, buttonAction, ...rest } = options;\n  const hasIndex = index !== undefined;\n  const value = hasIndex ? preset[key][index] : preset[key];\n  const keyId = hasIndex ? `${key}:${index}` : key;\n  return (\n    <div key={keyId} className=\"row\">\n      <label className=\"input-label\" htmlFor={keyId}>\n        {keyId}\n      </label>\n      <input\n        autoComplete=\"off\"\n        id={keyId}\n        className=\"standard-input\"\n        type={type}\n        value={value}\n        checked={type === 'checkbox' ? preset[key] : false}\n        onChange={e => {\n          const newValue =\n            type === 'checkbox'\n              ? e.target.checked\n              : type === 'number'\n              ? e.target.value === ''\n                ? ''\n                : parseFloat(e.target.value)\n              : e.target.value;\n          if (hasIndex) {\n            onChange({\n              [key]: immutableIndexUpdate(preset[key], index, newValue),\n            });\n          } else {\n            onChange({ [key]: newValue });\n          }\n        }}\n        onKeyUp={fixAndroidKeyboardDismiss}\n        {...rest}\n      />\n      {type === 'range' && <input className=\"fill-input\" type=\"text\" readOnly value={value} />}\n      {buttonAction && (\n        <button onClick={buttonAction}>\n          <span role=\"img\" aria-label=\"save-preset\">\n            {buttonIcon}\n          </span>\n        </button>\n      )}\n      {advanced && hasIndex && preset[key].length > 1 && (\n        <button\n          className=\"destructive\"\n          onClick={() => {\n            onChange({\n              [key]: immutableIndexUpdate(preset[key], index, undefined).filter(isNotUndefined),\n            });\n          }}\n        >\n          ✖\n        </button>\n      )}\n    </div>\n  );\n}\n\nfunction select(value, key, options, onChange, extraOptions = {}) {\n  const { buttonIcon, buttonAction } = extraOptions;\n\n  return (\n    <div className=\"row\">\n      <label className=\"input-label\" htmlFor={key}>\n        {key}\n      </label>\n      <select id={key} className=\"standard-input\" value={value} onChange={e => onChange({ [key]: e.target.value })}>\n        {' '}\n        {options.map(option => (\n          <option key={option} value={option}>\n            {option}\n          </option>\n        ))}\n      </select>\n      {buttonAction && (\n        <button onClick={buttonAction}>\n          <span role=\"img\" aria-label=\"save-preset\">\n            {buttonIcon}\n          </span>\n        </button>\n      )}\n    </div>\n  );\n}\n\nfunction layer(preset, index, onChange) {\n  const layer = preset.layers[index];\n  const keyId = `layer${index}`;\n  return (\n    <div className=\"layer-group\" key={keyId}>\n      <div className=\"layer row\">\n        <select\n          className=\"type\"\n          value={layer.type}\n          onChange={e => {\n            if (e.target.value === 'glow') {\n              onChange({\n                layers: immutableIndexUpdate(preset.layers, index, { type: e.target.value, blend: layer.blend, blur: layer.blur }),\n              });\n            } else if (e.target.value === 'core') {\n              onChange({\n                layers: immutableIndexUpdate(preset.layers, index, {\n                  ...layer,\n                  type: e.target.value,\n                  size: 300,\n                  color: '#98C0E6',\n                }),\n              });\n            }\n          }}\n        >\n          {['glow', 'core'].map(option => (\n            <option key={option} value={option}>\n              {option}\n            </option>\n          ))}\n        </select>\n\n        <select\n          className=\"blend\"\n          value={layer.blend}\n          onChange={e => {\n            onChange({\n              layers: immutableIndexUpdate(preset.layers, index, { ...layer, blend: e.target.value }),\n            });\n          }}\n        >\n          {AVAILABLE_BLEND_MODES.map(option => (\n            <option key={option} value={option}>\n              {BLEND_MODES_TO_TEXT[option] ? BLEND_MODES_TO_TEXT[option] : option}\n            </option>\n          ))}\n        </select>\n\n        {preset.layers.length > 1 && (\n          <>\n            <button\n              disabled={index === 0}\n              onClick={() => {\n                onChange({\n                  layers: immutableIndexSwitch(preset.layers, index, index - 1),\n                });\n              }}\n            >\n              ⬆\n            </button>\n            <button\n              disabled={index === preset.layers.length - 1}\n              onClick={() => {\n                onChange({\n                  layers: immutableIndexSwitch(preset.layers, index, index + 1),\n                });\n              }}\n            >\n              ⬇\n            </button>\n            <button\n              className=\"destructive\"\n              onClick={() => {\n                onChange({\n                  layers: immutableIndexUpdate(preset.layers, index, undefined).filter(isNotUndefined),\n                });\n              }}\n            >\n              ✖\n            </button>\n          </>\n        )}\n      </div>\n      <div className=\"layer row\">\n        <label htmlFor={`blur-${keyId}`}>blur</label>\n        <input\n          autoComplete=\"off\"\n          id={`blur-${keyId}`}\n          type=\"number\"\n          className=\"layer-value\"\n          value={layer.blur}\n          min={0}\n          onChange={e => {\n            onChange({\n              layers: immutableIndexUpdate(preset.layers, index, { ...layer, blur: e.target.value }),\n            });\n          }}\n          onKeyUp={fixAndroidKeyboardDismiss}\n        />\n        {layer.type === 'core' && (\n          <>\n            <label htmlFor={`size-${keyId}`}>size</label>\n            <input\n              autoComplete=\"off\"\n              id={`size-${keyId}`}\n              type=\"number\"\n              className=\"layer-value\"\n              value={layer.size}\n              min={0}\n              onChange={e => {\n                onChange({\n                  layers: immutableIndexUpdate(preset.layers, index, { ...layer, size: e.target.value }),\n                });\n              }}\n              onKeyUp={fixAndroidKeyboardDismiss}\n            />\n            <label htmlFor={`color-${keyId}`}>color</label>\n            <input\n              autoComplete=\"off\"\n              id={`color-${keyId}`}\n              type=\"color\"\n              className=\"layer-value\"\n              value={layer.color}\n              onChange={e => {\n                onChange({\n                  layers: immutableIndexUpdate(preset.layers, index, { ...layer, color: e.target.value }),\n                });\n              }}\n            />\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n","export function presetToUrl(preset) {\n  return `${window.location.href.split('#')[0]}#${presetToHash(preset)}`;\n}\n\nexport function urlToPreset() {\n  const hash = window.location.href.split('#')[1];\n  try {\n    return hash ? hashToPreset(hash) : undefined;\n  } catch {\n    return undefined;\n  }\n}\n\nexport function shareOnTwitter(url, text, hashtags) {\n  let shareURL = 'http://twitter.com/share?';\n  const params = {\n    url,\n    text,\n    hashtags: hashtags.join(','),\n  };\n  for (var prop in params) shareURL += '&' + prop + '=' + encodeURIComponent(params[prop]);\n  window.open(shareURL, '', 'left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0');\n}\n\nexport function presetToHash(preset) {\n  return btoa(JSON.stringify(preset));\n}\n\nexport function hashToPreset(hash) {\n  return JSON.parse(atob(hash));\n}\n","export function track(eventAction, value = undefined) {\n  if (window.ga) {\n    window.ga('send', 'event', { eventAction, eventLabel: value });\n  }\n}\n","import React from 'react';\nimport Canvas from './Canvas';\nimport Inputs from './Inputs';\nimport { saveAs } from 'file-saver';\nimport { urlToPreset, shareOnTwitter, presetToUrl, presetToHash } from '../utils/sharing';\nimport { track } from '../utils/analytics';\nimport { DEFAULT_PRESET, PRESET_VERSION } from '../presets';\n\nconst CANVAS_SIZE = 1500;\n\nexport default function App() {\n  const canvasRef = React.useRef(null);\n\n  const [presets, setPresets] = React.useState({\n    default: DEFAULT_PRESET,\n    ...JSON.parse(localStorage.getItem('presets') || '{}'),\n  });\n\n  const [advanced, setAdvanced] = React.useState(localStorage.getItem('advanced') === 'true');\n\n  const initialPreset = urlToPreset() || presets[localStorage.getItem('lastPreset')] || DEFAULT_PRESET;\n  const [preset, setPresetValue] = React.useState(initialPreset.version === PRESET_VERSION ? initialPreset : DEFAULT_PRESET);\n\n  const onSave = () => {\n    track('click', 'imageSaved');\n    canvasRef.current.toBlob(blob => {\n      saveAs(blob, `galaxy-${preset.name}.png`);\n    });\n  };\n\n  const onUndoChanges = () => {\n    track('click', 'undoChanged');\n    document.location.hash = '';\n    setPresetValue(presets[localStorage.getItem('lastPreset') || 'default']);\n  };\n\n  const onChange = value => {\n    track('inputChanged', Object.keys(value)[0]);\n    const newPreset = { ...preset, ...value };\n    setPresetValue(newPreset);\n    document.location.hash = presetToHash(newPreset);\n  };\n\n  const onSavePreset = () => {\n    track('click', 'presetSaved');\n    const newPresets = { ...presets, [preset.name]: preset };\n    localStorage.setItem('presets', JSON.stringify(newPresets));\n    localStorage.setItem('lastPreset', preset.name);\n    setPresets(newPresets);\n  };\n\n  const onChangePreset = value => {\n    const presetName = value.preset;\n    track('presetChanged');\n    setPresetValue(presets[presetName]);\n    localStorage.setItem('lastPreset', presetName);\n  };\n\n  const onShare = () => {\n    track('click', 'shareTwitter');\n    shareOnTwitter(presetToUrl(preset), 'I created a galaxy! ⭐', ['icreatedagalaxy', 'reversim', 'rs19']);\n  };\n\n  const onChangeAdvanced = value => {\n    track('advancedChanged', value);\n    setAdvanced(value);\n    localStorage.setItem('advanced', value);\n  };\n\n  return (\n    <div className=\"layout\">\n      <Canvas canvasRef={canvasRef} size={CANVAS_SIZE} preset={preset} />\n      <Inputs\n        presets={Object.keys(presets)}\n        preset={preset}\n        advanced={advanced}\n        onSave={onSave}\n        onSavePreset={onSavePreset}\n        onUndoChanges={onUndoChanges}\n        onChange={onChange}\n        onChangePreset={onChangePreset}\n        onShare={onShare}\n        onChangeAdvanced={onChangeAdvanced}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { invalidatePresetCacheIfNeeded } from './presets';\n\ninvalidatePresetCacheIfNeeded();\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}